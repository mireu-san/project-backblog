<div class="comment">
    <p><strong>{{ comment.author }}</strong></p>
    <p>{{ comment.text }}</p>
    {% if user.is_authenticated and user == comment.author %}
    <a href="{% url 'blog:comment_delete' post_pk=post.pk comment_pk=comment.pk %}">Delete</a>
{% endif %}


    <!-- 대댓글 표시 -->
    {% for child_comment in comment.children.all %}
        <div class="comment" style="margin-left: 20px;">
            {% with comment=child_comment post=post %}
                {% include "comment_block.html" %}
            {% endwith %}
        </div>
    {% endfor %}


    <!-- Reply 버튼 -->
    {% if user.is_authenticated %}
        <button class="reply-button" onclick="showReplyForm({{ comment.id }})">Reply</button>
    {% endif %}

    <!-- 대댓글 작성 폼 (기본적으로 숨김) -->
    <div class="comment-form" id="replyForm{{ comment.id }}" style="display: none;">
        <h4>Leave a Reply</h4>
        <form method="POST" action="{% url 'blog:comment_new' pk=post.pk %}">
            {% csrf_token %}
            <input type="hidden" name="parent_comment_id" value="{{ comment.id }}">
            <label for="text">Comment:</label>
            <textarea id="text" name="text" required></textarea>
            <button type="submit">Submit</button>
        </form>
    </div>
</div>
